<!doctype html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>Blattle of the Blands</title>
    <link rel='stylesheet' href='/style.css'>
  </head>
  <body>
    <% if (locals.admin) { %>
      <header>
        <form action='/addWeek' method='post'>
          <input type='submit' value='Next week'>
        </form>
        <form action='/clear' method='post'>
          <input type='submit' value='Reset'>
        </form>
      </header>
    <% } %>
    <div class='flex'>
      <% weeks.forEach((week, w) => { %>
        <div>
          <h1>Week <%= week.id %></h1>

          <h2>Top 10 Bands</h2>
          <% week.top_bands.forEach((band) => { %>
            <p><%= band.rank %>. <%- include('band', { band }) %> - <%= band.buzz %></p>
          <% }); %>

          <h2>Battles</h2>
          <% week.battles.forEach((battle, b) => { %>
            <h4><a href='/battle/<%= battle.id %>'>Level <%= battle.level %></a></h4>
            <div class='pad'>
              <% battle.entries.forEach((entry) => { %>
                <p><%- include('band', { band: entry.band }) %> - <%= entry.buzz_start + entry.buzz_awarded %></p>
              <% }); %>
            </div>
          <% }); %>
        </div>
      <% }); %>
    </div>
  </body>
</html>
